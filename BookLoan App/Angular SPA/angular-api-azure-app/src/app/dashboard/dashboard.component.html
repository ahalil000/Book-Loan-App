<div id="heading" class="heading"><b>Dashboard</b></div>

<div class="wrapper">

  <div class="report1-area">
    <mat-card style="border-style: outset;">
      <mat-card-title>
        <div id="heading" class="heading"><b>Top 5 Books</b></div>
      </mat-card-title>

      <mat-card-content >
          <div *ngIf="hasLoadedBooks$ | async; else loading">
            <div style="display: flex; flex-wrap: wrap; border-style: solid; border-width: 1px; background-color: cadetblue;">
                <div class="grid-header" style="flex: 0 25%; border-style: solid; border-width: 1px;"><b>RANKING</b></div>
                <div class="grid-header" style="flex: 0 55%; border-style: solid; border-width: 1px;"><b>TITLE</b></div>
                <div class="grid-header" style="flex: 0 20%; border-style: solid; border-width: 1px;"><b>#LOANS</b></div>
            </div>

            <mat-list *ngFor="let book of topBooks">
                <div style="display: flex; flex-wrap: wrap; border-style: solid; border-width: 1px;">
                    <div class="grid-row" style="flex: 0 25%; border-style: solid; border-width: 1px;">{{book.ranking}}</div>
                    <div class="grid-row" style="flex: 0 55%; border-style: solid; border-width: 1px;">{{book.title}}</div>
                    <div class="grid-row" style="flex: 0 20%; border-style: solid; border-width: 1px;">{{book.count}}</div>    
                </div> 
            </mat-list>
          </div>
          <br />
          <ng-template #loading>
            <div>
              <br />
              <mat-progress-spinner
                  class="example-margin"
                  [color]="primary"
                  [mode]="mode"
                  [value]="value">
              </mat-progress-spinner>
              loading books .. please wait
            </div>
          </ng-template>
        </mat-card-content>
    </mat-card>
  </div>

  <div class="report2-area">
    <mat-card style="border-style: outset;">
      <mat-card-title>
        <div id="heading" class="heading"><b>Most Outstanding Loans</b></div>
      </mat-card-title>

      <mat-card-content >
        <div *ngIf="hasLoadedMembers$ | async; else loading">
          <div style="display: flex; flex-wrap: wrap; border-style: solid; border-width: 1px; background-color: cadetblue;">
              <div class="grid-header" style="flex: 0 25%; border-style: solid; border-width: 1px;"><b>RANKING</b></div>
              <div class="grid-header" style="flex: 0 55%; border-style: solid; border-width: 1px;"><b>MEMBER</b></div>
              <div class="grid-header" style="flex: 0 20%; border-style: solid; border-width: 1px;"><b>#LOANS</b></div>
          </div>

          <mat-list *ngFor="let member of topMembers">
              <div style="display: flex; flex-wrap: wrap; border-style: solid; border-width: 1px;">
                  <div class="grid-row" style="flex: 0 25%; border-style: solid; border-width: 1px;">{{member.ranking}}</div>
                  <div class="grid-row" style="flex: 0 55%; border-style: solid; border-width: 1px;">{{member.userName}}</div>
                  <div class="grid-row" style="flex: 0 20%; border-style: solid; border-width: 1px;">{{member.count}}</div>    
              </div> 
          </mat-list>
        </div>
        <br />
        <ng-template #loading>
          <div>
            <br />
            <mat-progress-spinner
                class="example-margin"
                [color]="primary"
                [mode]="mode"
                [value]="value">
            </mat-progress-spinner>
            loading books .. please wait
          </div>
        </ng-template>
      </mat-card-content>
    </mat-card>
  </div>

  <div class="report3-area">
        <mat-card style="border-style: outset;">
          <mat-card-title>
            <div id="heading" class="heading"><b>Most Overdue Loans</b></div>
          </mat-card-title>

          <mat-card-content >
            <div *ngIf="hasLoadedOverdueLoans$ | async; else loading">
              <div style="display: flex; flex-wrap: wrap; border-style: solid; border-width: 1px; background-color: cadetblue;">
                  <div class="grid-header" style="flex: 0 25%; border-style: solid; border-width: 1px;"><b>TITLE</b></div>
                  <div class="grid-header" style="flex: 0 55%; border-style: solid; border-width: 1px;"><b>MEMBER</b></div>
                  <div class="grid-header" style="flex: 0 20%; border-style: solid; border-width: 1px;"><b>DAYS OVERDUE</b></div>
              </div>
    
              <mat-list *ngFor="let loan of overdueLoans">
                  <div style="display: flex; flex-wrap: wrap; border-style: solid; border-width: 1px;">
                      <div class="grid-row" style="flex: 0 25%; border-style: solid; border-width: 1px;">{{loan.title}}</div>
                      <div class="grid-row" style="flex: 0 55%; border-style: solid; border-width: 1px;">{{loan.borrower}}</div>
                      <div class="grid-row" style="flex: 0 20%; border-style: solid; border-width: 1px;">{{loan.daysOverdue}}</div>    
                  </div> 
              </mat-list>
            </div>
            <br />
            <ng-template #loading>
              <div>
                <br />
                <mat-progress-spinner
                    class="example-margin"
                    [color]="primary"
                    [mode]="mode"
                    [value]="value">
                </mat-progress-spinner>
                loading books .. please wait
              </div>
            </ng-template>
          </mat-card-content>
        </mat-card>
  </div>

</div>